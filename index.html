

<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>安全跳转提示 - 韩漫最新网址</title>
    <link href="https://fonts.googleapis.com/css2?family=Oxanium:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* 保持原有样式不变，仅修改部分颜色值 */
        .style-cyber .copy-btn {
            background: none;
            border: 2px solid #0ff;
            color: #0ff;
        }
        .style-korean .copy-btn {
            background: linear-gradient(45deg, #ff6b6b, #ff69b4);
        }
    </style>
</head>
<body>
    <!-- 样式切换按钮 -->
    <div class="style-switcher">
        <button class="style-btn style-default active-style" onclick="switchStyle('')">默认</button>
        <button class="style-btn" onclick="switchStyle('style-glass')">毛玻璃</button>
        <button class="style-btn" onclick="switchStyle('style-korean')">韩漫</button>
        <button class="style-btn" onclick="switchStyle('style-cyber')">赛博</button>
    </div>

    <!-- 微信弹窗 -->
    <div class="wechat-modal" id="wechatModal">
        <div class="card">
            <p class="tip-text">微信环境访问受限，请复制链接到浏览器打开</p>
            <button class="copy-btn" id="copyBtn">点击复制链接</button>
            <p class="tip-text" style="font-size:12px;margin-top:8px;">当前页面链接：<span id="currentUrl"></span></p>
        </div>
    </div>

    <!-- 正常跳转卡片 -->
    <div class="card" id="normalCard">
        <div class="countdown" id="countdown">5</div>
        <p class="tip-text">即将自动跳转到目标网站</p>
        <p class="tip-text" style="font-size:12px;">跳转目标链接：<span id="targetUrl"></span></p>
    </div>

    <!-- 底部提示 -->
    <div class="footer">
        如跳转失败，请到公众号 韩漫最新网址 回复【最新】获取最新地址
    </div>

    <!-- 复制反馈 -->
    <div class="copied-feedback" id="copiedFeedback">复制成功！</div>

    <script>
        // 配置不同链接
        const jumpUrl = 'https://hanman-autojump.xyz';  // 自动跳转链接
        const copyUrl = window.location.href;          // 当前页面链接

        // 初始化显示链接
        document.getElementById('currentUrl').textContent = copyUrl;
        document.getElementById('targetUrl').textContent = jumpUrl;

        // 样式切换功能
        function switchStyle(styleClass) {
            document.body.className = styleClass;
            document.querySelectorAll('.style-btn').forEach(btn => {
                btn.classList.toggle('active-style', btn.onclick.toString().includes(styleClass));
            });
        }

        // 环境检测
        function isWechatBrowser() {
            return /micromessenger/i.test(navigator.userAgent);
        }

        // 初始化逻辑
        function init() {
            const wechatModal = document.getElementById('wechatModal');
            const normalCard = document.getElementById('normalCard');

            if(isWechatBrowser()) {
                // 微信环境处理
                wechatModal.style.display = 'flex';
                normalCard.style.display = 'none';

                document.getElementById('copyBtn').addEventListener('click', async () => {
                    try {
                        await navigator.clipboard.writeText(copyUrl);
                        showFeedback();
                    } catch (err) {
                        // 兼容旧版浏览器
                        const textarea = document.createElement('textarea');
                        textarea.value = copyUrl;
                        document.body.appendChild(textarea);
                        textarea.select();
                        document.execCommand('copy');
                        document.body.removeChild(textarea);
                        showFeedback();
                    }
                });
            } else {
                // 非微信环境处理
                wechatModal.style.display = 'none';
                startCountdown();
            }
        }

        // 倒计时逻辑
        function startCountdown() {
            let seconds = 5;
            const countdownElement = document.getElementById('countdown');
            
            const timer = setInterval(() => {
                countdownElement.textContent = --seconds;
                if(seconds <= 0) {
                    clearInterval(timer);
                    window.location.href = jumpUrl;
                }
            }, 1000);
        }

        // 显示反馈
        function showFeedback() {
            const feedback = document.getElementById('copiedFeedback');
            feedback.style.display = 'block';
            setTimeout(() => feedback.style.display = 'none', 1500);
        }

        window.onload = init;
    </script>
</body>
</html>
